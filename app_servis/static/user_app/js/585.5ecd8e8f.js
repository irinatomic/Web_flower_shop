"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[585],{5585:function(e,r,t){t.r(r),t.d(r,{default:function(){return f}});var a=function(){var e=this,r=e._self._c;return r("div",{staticClass:"order-view"},[r("OrderCreate")],1)},s=[],i=function(){var e=this,r=e._self._c;return r("div",{staticClass:"container"},[r("div",{staticClass:"order-form"},["success"===e.submissionStatus?r("div",{staticClass:"success-message"},[e._v(" Order submitted successfully! Thank you! ")]):e._e(),r("form",{on:{submit:function(r){return r.preventDefault(),e.submitOrder.apply(null,arguments)}}},[r("label",{attrs:{for:"zakazano_vreme"}},[e._v("Zakazano Vreme:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.zakazano_vreme,expression:"order.zakazano_vreme"}],attrs:{type:"datetime-local",id:"zakazano_vreme",required:""},domProps:{value:e.order.zakazano_vreme},on:{input:function(r){r.target.composing||e.$set(e.order,"zakazano_vreme",r.target.value)}}}),e.isTimeValid?e._e():r("span",{staticClass:"error-message"},[e._v(" Vreme mora biti minimum 24h od sada ")]),r("label",{attrs:{for:"adresa"}},[e._v("Adresa:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.adresa,expression:"order.adresa"}],attrs:{type:"text",id:"adresa",required:""},domProps:{value:e.order.adresa},on:{input:function(r){r.target.composing||e.$set(e.order,"adresa",r.target.value)}}}),e.isAdresaValid?e._e():r("span",{staticClass:"error-message"},[e._v(" Adresa mora da sadr탑i slova i brojeve ")]),r("label",{attrs:{for:"telefon"}},[e._v("Telefon:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.telefon,expression:"order.telefon"}],attrs:{type:"tel",id:"telefon",pattern:"[0-9]+",required:""},domProps:{value:e.order.telefon},on:{input:function(r){r.target.composing||e.$set(e.order,"telefon",r.target.value)}}}),e.isTelefonValid?e._e():r("span",{staticClass:"error-message"},[e._v(" Telefon mora da sadr탑i samo brojeve ")]),r("label",{attrs:{for:"email"}},[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.email,expression:"order.email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:e.order.email},on:{input:function(r){r.target.composing||e.$set(e.order,"email",r.target.value)}}}),e.isEmailValid?e._e():r("span",{staticClass:"error-message"},[e._v(" Email mora biti formata example@email.com ")]),r("label",{attrs:{for:"ime_prezime"}},[e._v("Ime i Prezime:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.ime_prezime,expression:"order.ime_prezime"}],attrs:{type:"text",id:"ime_prezime",required:""},domProps:{value:e.order.ime_prezime},on:{input:function(r){r.target.composing||e.$set(e.order,"ime_prezime",r.target.value)}}}),e.isImePrezimeValid?e._e():r("span",{staticClass:"error-message"},[e._v(" Ime i prezime mora da sadr탑i samo slova ")]),r("label",{attrs:{for:"sadrzaj"}},[e._v("Sadrzaj:")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("label",{attrs:{for:"spisak-cvetova"}},[e._v("Cvetovi:")]),r("div",{staticClass:"input-group mb-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedProduct,expression:"selectedProduct"}],staticClass:"form-select",attrs:{id:"spisak-cvetova"},on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.selectedProduct=r.target.multiple?t:t[0]}}},e._l(e.products,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.naziv)+" ")])})),0),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedAmount,expression:"selectedAmount"}],staticClass:"form-select",attrs:{id:"broj-komada"},on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.selectedAmount=r.target.multiple?t:t[0]}}},e._l([1,2,3,4,5],(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0),r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.addToOrder}},[e._v("+")])])]),r("div",{staticClass:"col-md-6"},[r("label",{attrs:{for:"izabrano"}},[e._v("Izabrano:")]),r("div",{attrs:{id:"izabrano"}},e._l(e.order.sadrzaj,(function(t,a){return r("div",{key:a},[e.getProductById(a)?[e._v(" "+e._s(e.getProductById(a).naziv)+" x "+e._s(t)+" - "+e._s(e.getProductById(a).cena*t)+" din "),r("button",{on:{click:function(r){return e.removeFromOrder(a)}}},[e._v("Remove")])]:e._e()],2)})),0),Object.keys(e.order.sadrzaj).length>0?r("div",[e._v(" Total Price: "+e._s(e.calculateTotalPrice())+" RSD ")]):e._e()])])])]),r("button",{attrs:{type:"submit"},on:{click:function(r){return r.preventDefault(),e.submitOrder.apply(null,arguments)}}},[e._v("Posalji narud탑binu")])])},o=[],d=t(408),l={name:"OrderForm",data(){return{order:{zakazano_vreme:"",adresa:"",telefon:"",email:"",ime_prezime:"",sadrzaj:{}},selectedProduct:null,selectedAmount:1,submissionStatus:null,isTimeValid:!0,isAdresaValid:!0,isTelefonValid:!0,isEmailValid:!0,isImePrezimeValid:!0}},computed:{...(0,d.rn)(["products"])},methods:{calculateTotalPrice(){let e=0;for(const[r,t]of Object.entries(this.order.sadrzaj)){const a=this.getProductById(r);e+=a.cena*t}return e},addToOrder(){const e=document.getElementById("spisak-cvetova").value,r=document.getElementById("broj-komada").value;this.order.sadrzaj.hasOwnProperty(e)?this.order.sadrzaj[e]+=parseInt(r):this.$set(this.order.sadrzaj,e,parseInt(r))},removeFromOrder(e){this.$delete(this.order.sadrzaj,e)},getProductById(e){return this.products.find((r=>r.id===parseInt(e)))},clearOrderForm(){this.order={zakazano_vreme:"",adresa:"",telefon:"",email:"",ime_prezime:"",sadrzaj:{}},this.selectedProduct=null,this.selectedAmount=1,this.submissionStatus="success",setTimeout((()=>{this.submissionStatus=null}),5e3)},validateOrder(){const e=this.order.zakazano_vreme;null==e&&(this.isTimeValid=!1);const r=new Date(e).getTime(),t=(new Date).getTime(),a=t+864e5;this.isTimeValid=r>=a;const s=/^[a-zA-Z][a-zA-Z0-9\s,'-]*$/,i=/^[0-9]+$/,o=/^[^@]+@\w+\.\w+$/,d=/^[a-zA-Z][a-zA-Z\s]*$/;return this.isAdresaValid=s.test(this.order.adresa),this.isTelefonValid=i.test(this.order.telefon),this.isEmailValid=o.test(this.order.email),this.isImePrezimeValid=d.test(this.order.ime_prezime),this.isTimeValid&&this.isAdresaValid&&this.isTelefonValid&&this.isEmailValid&&this.isImePrezimeValid},async submitOrder(){if(!this.validateOrder())return void console.log("Incorrect order input");await this.$store.dispatch("sendOrder",this.order);const e=this.$store.state.orderStatus;"success"===e&&this.clearOrderForm()}}},n=l,m=t(1001),u=(0,m.Z)(n,i,o,!1,null,"50cd7e42",null),c=u.exports,v={name:"OrderView",components:{OrderCreate:c}},p=v,_=(0,m.Z)(p,a,s,!1,null,null,null),f=_.exports}}]);
//# sourceMappingURL=585.5ecd8e8f.js.map